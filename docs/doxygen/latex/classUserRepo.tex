\doxysection{User\+Repo Class Reference}
\hypertarget{classUserRepo}{}\label{classUserRepo}\index{UserRepo@{UserRepo}}
Inheritance diagram for User\+Repo\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{classUserRepo}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classUser}{User}} \mbox{\hyperlink{classUserRepo_a7c764768b3e6b77a2211368d55150f7a}{add\+User}} (\mbox{\hyperlink{classUser}{User}} user)
\begin{DoxyCompactList}\small\item\em Adiciona um usuario ao banco de dados. \end{DoxyCompactList}\item 
std\+::vector$<$ \mbox{\hyperlink{classUser}{User}} $>$ \mbox{\hyperlink{classUserRepo_a76523cf7151f815c017a3bfa66a167be}{search\+User}} (std\+::string keyword)
\begin{DoxyCompactList}\small\item\em Busca usuário baseado em uma keyword. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classUser}{User}} \mbox{\hyperlink{classUserRepo_aff58458ec6c6c7c358755e4450fac271}{search\+User\+By\+Id}} (int id)
\begin{DoxyCompactList}\small\item\em Busca usúario baseado em um id. \end{DoxyCompactList}\item 
std\+::vector$<$ \mbox{\hyperlink{classUser}{User}} $>$ \mbox{\hyperlink{classUserRepo_a52c5babc49efaad637ddd4017a2c4f51}{get\+Following}} (\mbox{\hyperlink{classUser}{User}} u)
\begin{DoxyCompactList}\small\item\em Obtem uma lista de todos os seguidos de um usuario. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classUser}{User}} \mbox{\hyperlink{classUserRepo_a892b14262f00a1e0b4a3bdebf1806a85}{follow\+User}} (\mbox{\hyperlink{classUser}{User}} follower, \mbox{\hyperlink{classUser}{User}} followed)
\begin{DoxyCompactList}\small\item\em Adiciona o following a lista de seguidors do follower. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions inherited from \mbox{\hyperlink{classAbstractRepo}{Abstract\+Repo}}}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classAbstractRepo_a45996b2f964eb581aec08c0b6da679ee}{Abstract\+Repo}} ()
\begin{DoxyCompactList}\small\item\em Construtor padrao. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classAbstractRepo_a200bbb9e75fc2df4f8822ee558c9055f}{\texorpdfstring{$\sim$}{\string~}\+Abstract\+Repo}} ()
\begin{DoxyCompactList}\small\item\em Destrutor padrao. \end{DoxyCompactList}\item 
virtual int \mbox{\hyperlink{classAbstractRepo_ac5942793beb49d527fcd9ae8a6a95d06}{execute\+Insert}} (sqlite3 \texorpdfstring{$\ast$}{*}db, std\+::string sql) const
\begin{DoxyCompactList}\small\item\em Executa um insert sql. \end{DoxyCompactList}\item 
virtual std\+::vector$<$ std\+::map$<$ std\+::string, std\+::string $>$ $>$ \mbox{\hyperlink{classAbstractRepo_ab4fa6ec748e3218ebc2dc116c2435cdf}{execute\+Select}} (sqlite3 \texorpdfstring{$\ast$}{*}db, std\+::string sql) const
\begin{DoxyCompactList}\small\item\em Executa um select sql. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Additional Inherited Members}
\doxysubsection*{Protected Attributes inherited from \mbox{\hyperlink{classAbstractRepo}{Abstract\+Repo}}}
\begin{DoxyCompactItemize}
\item 
sqlite3 \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classAbstractRepo_aa49e51230be6d753539ce265a998e24c}{\+\_\+db}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


Definition at line \mbox{\hyperlink{userrepo_8hpp_source_l00009}{9}} of file \mbox{\hyperlink{userrepo_8hpp_source}{userrepo.\+hpp}}.



\doxysubsection{Member Function Documentation}
\Hypertarget{classUserRepo_a7c764768b3e6b77a2211368d55150f7a}\label{classUserRepo_a7c764768b3e6b77a2211368d55150f7a} 
\index{UserRepo@{UserRepo}!addUser@{addUser}}
\index{addUser@{addUser}!UserRepo@{UserRepo}}
\doxysubsubsection{\texorpdfstring{addUser()}{addUser()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classUser}{User}} User\+Repo\+::add\+User (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classUser}{User}}}]{user }\end{DoxyParamCaption})}



Adiciona um usuario ao banco de dados. 


\begin{DoxyParams}{Parameters}
{\em user} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Retorna o próprio usuário criado caso sucesso e um throw de erro caso dê errado 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{userrepo_8cpp_source_l00005}{5}} of file \mbox{\hyperlink{userrepo_8cpp_source}{userrepo.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00005\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00006\ \ \ \ \ std::string\ sql;}
\DoxyCodeLine{00007\ \ \ \ \ sql\ +=\ \textcolor{stringliteral}{"{}INSERT\ INTO\ user\ (username,\ password,\ nickname)\ VALUES\ ("{}};}
\DoxyCodeLine{00008\ \ \ \ \ sql\ +=\ \textcolor{stringliteral}{"{}'"{}}\ +\ user.\mbox{\hyperlink{classUser_a3b777377235791d371d175a6c5d13fea}{username}}()\ +\ \textcolor{stringliteral}{"{}',\ "{}};}
\DoxyCodeLine{00009\ \ \ \ \ sql\ +=\ \textcolor{stringliteral}{"{}'"{}}\ +\ user.\mbox{\hyperlink{classUser_ab8764ac53e99ae8833527b8246cbe33c}{password}}()\ +\ \textcolor{stringliteral}{"{}',\ "{}};}
\DoxyCodeLine{00010\ \ \ \ \ sql\ +=\ \textcolor{stringliteral}{"{}'"{}}\ +\ user.\mbox{\hyperlink{classUser_af94a2410e571f9da00a0b30eb7bf16ef}{nickname}}()\ +\ \textcolor{stringliteral}{"{}');"{}};}
\DoxyCodeLine{00011\ \ \ \ \ \textcolor{keywordtype}{int}\ r\ =\ \mbox{\hyperlink{classAbstractRepo_ac5942793beb49d527fcd9ae8a6a95d06}{executeInsert}}(\_db,\ sql);}
\DoxyCodeLine{00012\ }
\DoxyCodeLine{00013\ \ \ \ \ \textcolor{keywordflow}{if}\ (r\ !=\ 0)\ \{}
\DoxyCodeLine{00014\ \ \ \ \ \ \ \ \ sqlite3\_int64\ lastRowId\ =\ sqlite3\_last\_insert\_rowid(\_db);}
\DoxyCodeLine{00015\ }
\DoxyCodeLine{00016\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Você\ pode\ agora\ buscar\ o\ usuário\ recém-\/criado\ usando\ o\ ID\ obtido}}
\DoxyCodeLine{00017\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classUser}{User}}\ newUser\ =\ \mbox{\hyperlink{classUserRepo_aff58458ec6c6c7c358755e4450fac271}{searchUserById}}(\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(lastRowId));}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00019\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Retornando\ o\ usuário\ recém-\/criado}}
\DoxyCodeLine{00020\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ newUser;}
\DoxyCodeLine{00021\ \ \ \ \ \}}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \ \ \ \ \textcolor{keywordflow}{throw}\ \textcolor{stringliteral}{"{}Usuário\ não\ foi\ adicionado\ ao\ banco\ de\ dados"{}};}
\DoxyCodeLine{00024\ \}}

\end{DoxyCode}
\Hypertarget{classUserRepo_a892b14262f00a1e0b4a3bdebf1806a85}\label{classUserRepo_a892b14262f00a1e0b4a3bdebf1806a85} 
\index{UserRepo@{UserRepo}!followUser@{followUser}}
\index{followUser@{followUser}!UserRepo@{UserRepo}}
\doxysubsubsection{\texorpdfstring{followUser()}{followUser()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classUser}{User}} User\+Repo\+::follow\+User (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classUser}{User}}}]{follower,  }\item[{\mbox{\hyperlink{classUser}{User}}}]{followed }\end{DoxyParamCaption})}



Adiciona o following a lista de seguidors do follower. 


\begin{DoxyParams}{Parameters}
{\em follower} & Usuario que vai seguir \\
\hline
{\em followed} & Usuario seguido \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
O usuario seguido 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{userrepo_8cpp_source_l00061}{61}} of file \mbox{\hyperlink{userrepo_8cpp_source}{userrepo.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00062\ \ \ \ \ std::string\ sql\ =\ \textcolor{stringliteral}{"{}INSERT\ INTO\ follow\ (follower\_id,\ followed\_id)\ VALUES\ ("{}}+std::to\_string(follower.id())+\textcolor{stringliteral}{"{},\ "{}}+std::to\_string(followed.id())+\textcolor{stringliteral}{"{});"{}};}
\DoxyCodeLine{00063\ \ \ \ \ \textcolor{keywordtype}{int}\ r\ =\ \mbox{\hyperlink{classAbstractRepo_ac5942793beb49d527fcd9ae8a6a95d06}{executeInsert}}(\_db,\ sql);}
\DoxyCodeLine{00064\ \ \ \ \ \textcolor{keywordflow}{return}\ followed;}
\DoxyCodeLine{00065\ \}}

\end{DoxyCode}
\Hypertarget{classUserRepo_a52c5babc49efaad637ddd4017a2c4f51}\label{classUserRepo_a52c5babc49efaad637ddd4017a2c4f51} 
\index{UserRepo@{UserRepo}!getFollowing@{getFollowing}}
\index{getFollowing@{getFollowing}!UserRepo@{UserRepo}}
\doxysubsubsection{\texorpdfstring{getFollowing()}{getFollowing()}}
{\footnotesize\ttfamily std\+::vector$<$ \mbox{\hyperlink{classUser}{User}} $>$ User\+Repo\+::get\+Following (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classUser}{User}}}]{u }\end{DoxyParamCaption})}



Obtem uma lista de todos os seguidos de um usuario. 


\begin{DoxyParams}{Parameters}
{\em u} & O usuário \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Um vetor com os seguidos 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{userrepo_8cpp_source_l00049}{49}} of file \mbox{\hyperlink{userrepo_8cpp_source}{userrepo.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00050\ \ \ \ \ std::vector<User>\ userVec;}
\DoxyCodeLine{00051\ \ \ \ \ std::string\ sql\ =\ \textcolor{stringliteral}{"{}SELECT\ u.id\ FROM\ follow\ f\ JOIN\ user\ u\ ON\ u.id\ =\ f.followed\_id\ WHERE\ follower\_id="{}}+std::to\_string(u.id())+\textcolor{stringliteral}{"{};"{}};}
\DoxyCodeLine{00052\ \ \ \ \ std::vector<std::map<std::string,\ std::string>>\ result\ =\ \mbox{\hyperlink{classAbstractRepo_ab4fa6ec748e3218ebc2dc116c2435cdf}{executeSelect}}(\_db,\ sql);}
\DoxyCodeLine{00053\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\ userId\ :\ result)\ \{}
\DoxyCodeLine{00054\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ userVec.push\_back(\mbox{\hyperlink{classUserRepo_aff58458ec6c6c7c358755e4450fac271}{searchUserById}}(stoi(userId[\textcolor{stringliteral}{"{}id"{}}])));}
\DoxyCodeLine{00056\ \ \ \ \ \}}
\DoxyCodeLine{00057\ }
\DoxyCodeLine{00058\ \ \ \ \ \textcolor{keywordflow}{return}\ userVec;}
\DoxyCodeLine{00059\ \}}

\end{DoxyCode}
\Hypertarget{classUserRepo_a76523cf7151f815c017a3bfa66a167be}\label{classUserRepo_a76523cf7151f815c017a3bfa66a167be} 
\index{UserRepo@{UserRepo}!searchUser@{searchUser}}
\index{searchUser@{searchUser}!UserRepo@{UserRepo}}
\doxysubsubsection{\texorpdfstring{searchUser()}{searchUser()}}
{\footnotesize\ttfamily std\+::vector$<$ \mbox{\hyperlink{classUser}{User}} $>$ User\+Repo\+::search\+User (\begin{DoxyParamCaption}\item[{std\+::string}]{keyword }\end{DoxyParamCaption})}



Busca usuário baseado em uma keyword. 


\begin{DoxyParams}{Parameters}
{\em keyword} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Retorna uma lista de usuarios que contenham a chave especificada no userame 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{userrepo_8cpp_source_l00036}{36}} of file \mbox{\hyperlink{userrepo_8cpp_source}{userrepo.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00036\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00037\ \ \ \ \ std::vector<User>\ userVec;}
\DoxyCodeLine{00038\ \ \ \ \ std::string\ sql;}
\DoxyCodeLine{00039\ \ \ \ \ sql\ +=\ \textcolor{stringliteral}{"{}SELECT\ *\ FROM\ user\ WHERE\ username\ LIKE\ '\%"{}}\ +\ keyword\ +\ \textcolor{stringliteral}{"{}\%'\ LIMIT\ 5;"{}};}
\DoxyCodeLine{00040\ \ \ \ \ std::vector<std::map<std::string,\ std::string>>\ result\ =\ \mbox{\hyperlink{classAbstractRepo_ab4fa6ec748e3218ebc2dc116c2435cdf}{executeSelect}}(\_db,\ sql);}
\DoxyCodeLine{00041\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\ userData\ :\ result)\ \{}
\DoxyCodeLine{00042\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classUser}{User}}\ u(stoi(userData[\textcolor{stringliteral}{"{}id"{}}]),\ userData[\textcolor{stringliteral}{"{}username"{}}],\ userData[\textcolor{stringliteral}{"{}password"{}}],\ userData[\textcolor{stringliteral}{"{}nickname"{}}]);}
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ userVec.push\_back(u);}
\DoxyCodeLine{00044\ \ \ \ \ \}\ }
\DoxyCodeLine{00045\ }
\DoxyCodeLine{00046\ \ \ \ \ \textcolor{keywordflow}{return}\ userVec;}
\DoxyCodeLine{00047\ \}}

\end{DoxyCode}
\Hypertarget{classUserRepo_aff58458ec6c6c7c358755e4450fac271}\label{classUserRepo_aff58458ec6c6c7c358755e4450fac271} 
\index{UserRepo@{UserRepo}!searchUserById@{searchUserById}}
\index{searchUserById@{searchUserById}!UserRepo@{UserRepo}}
\doxysubsubsection{\texorpdfstring{searchUserById()}{searchUserById()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classUser}{User}} User\+Repo\+::search\+User\+By\+Id (\begin{DoxyParamCaption}\item[{int}]{id }\end{DoxyParamCaption})}



Busca usúario baseado em um id. 


\begin{DoxyParams}{Parameters}
{\em id} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Retorna o usuário específico com esse id 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{userrepo_8cpp_source_l00026}{26}} of file \mbox{\hyperlink{userrepo_8cpp_source}{userrepo.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00026\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00027\ \ \ \ \ std::string\ sql;}
\DoxyCodeLine{00028\ \ \ \ \ sql\ +=\ \textcolor{stringliteral}{"{}SELECT\ *\ FROM\ user\ WHERE\ id\ =\ "{}}\ +\ std::to\_string(\textcolor{keywordtype}{id})\ +\ \textcolor{stringliteral}{"{};"{}};}
\DoxyCodeLine{00029\ \ \ \ \ std::vector<std::map<std::string,\ std::string>>\ result\ =\ \mbox{\hyperlink{classAbstractRepo_ab4fa6ec748e3218ebc2dc116c2435cdf}{executeSelect}}(\_db,\ sql);}
\DoxyCodeLine{00030\ \ \ \ \ }
\DoxyCodeLine{00031\ \ \ \ \ \mbox{\hyperlink{classUser}{User}}\ u(stoi(result[0][\textcolor{stringliteral}{"{}id"{}}]),\ result[0][\textcolor{stringliteral}{"{}username"{}}],\ result[0][\textcolor{stringliteral}{"{}password"{}}],\ result[0][\textcolor{stringliteral}{"{}nickname"{}}]);}
\DoxyCodeLine{00032\ \ \ \ \ \textcolor{keywordflow}{return}\ u;}
\DoxyCodeLine{00033\ \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
userrepo.\+hpp\item 
userrepo.\+cpp\end{DoxyCompactItemize}
