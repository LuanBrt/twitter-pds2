\hypertarget{classrepo_1_1CommentRepo}{}\doxysection{repo\+::Comment\+Repo Class Reference}
\label{classrepo_1_1CommentRepo}\index{repo::CommentRepo@{repo::CommentRepo}}
Inheritance diagram for repo\+::Comment\+Repo\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{classrepo_1_1CommentRepo}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classmodel_1_1Comment}{model\+::\+Comment}} \mbox{\hyperlink{classrepo_1_1CommentRepo_a0b2e980529a1205ede2eebcf0b6ea12a}{add\+Comment}} (\mbox{\hyperlink{classmodel_1_1Comment}{model\+::\+Comment}} comment)
\begin{DoxyCompactList}\small\item\em Adiciona um comentário ao banco de dados. \end{DoxyCompactList}\item 
std\+::vector$<$ \mbox{\hyperlink{classmodel_1_1Comment}{model\+::\+Comment}} $>$ \mbox{\hyperlink{classrepo_1_1CommentRepo_ac5b3bcd0b53dd1679718e2b20cdeef82}{get\+Comments\+By\+Tweet\+Id}} (int tweet\+Id)
\begin{DoxyCompactList}\small\item\em Pega todos os tweets do banco de dados. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classmodel_1_1Comment}{model\+::\+Comment}} \mbox{\hyperlink{classrepo_1_1CommentRepo_a667ad27ff5728c17ea723902c6b7a498}{search\+Comment\+By\+Id}} (int id)
\begin{DoxyCompactList}\small\item\em Busca tweets que foram enviados por um usuario com esse username. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}


Definition at line 10 of file commentrepo.\+hpp.



\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classrepo_1_1CommentRepo_a0b2e980529a1205ede2eebcf0b6ea12a}\label{classrepo_1_1CommentRepo_a0b2e980529a1205ede2eebcf0b6ea12a}} 
\index{repo::CommentRepo@{repo::CommentRepo}!addComment@{addComment}}
\index{addComment@{addComment}!repo::CommentRepo@{repo::CommentRepo}}
\doxysubsubsection{\texorpdfstring{addComment()}{addComment()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classmodel_1_1Comment}{model\+::\+Comment}} repo\+::\+Comment\+Repo\+::add\+Comment (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classmodel_1_1Comment}{model\+::\+Comment}}}]{comment }\end{DoxyParamCaption})}



Adiciona um comentário ao banco de dados. 


\begin{DoxyParams}{Parameters}
{\em comment} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Retorna o próprio comentário criado caso sucesso e um throw de erro caso dê errado 
\end{DoxyReturn}


Definition at line 6 of file commentreppo.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{6                                                            \{}
\DoxyCodeLine{7       std::string sql;}
\DoxyCodeLine{8       sql += \textcolor{stringliteral}{"INSERT INTO comment (author\_id, tweet\_id, description) VALUES ("};}
\DoxyCodeLine{9       sql += \textcolor{stringliteral}{""} + std::to\_string(comment.\mbox{\hyperlink{classmodel_1_1Comment_a5bbeadcc75ce87f13b526e4224d05888}{author}}().id()) + \textcolor{stringliteral}{", "};}
\DoxyCodeLine{10       sql += \textcolor{stringliteral}{""} + std::to\_string(comment.\mbox{\hyperlink{classmodel_1_1Comment_a83ad3c90a45604bf5c837123b2fc9768}{tweet}}().\mbox{\hyperlink{classmodel_1_1Tweet_a28e321ed57fdd07686f07b961bfe2049}{id}}()) + \textcolor{stringliteral}{", "};}
\DoxyCodeLine{11       sql += \textcolor{stringliteral}{"'"} + comment.\mbox{\hyperlink{classmodel_1_1Comment_a867a2fe91ce9c448c8e1bc2e7c23abd4}{description}}() + \textcolor{stringliteral}{"');"};}
\DoxyCodeLine{12 }
\DoxyCodeLine{13       std::cout << sql << std::endl;}
\DoxyCodeLine{14       \textcolor{keywordtype}{int} r = \mbox{\hyperlink{classrepo_1_1AbstractRepo_abecbbf012d9640e349d2ac6c5ddb61d8}{executeInsert}}(\_db, sql);}
\DoxyCodeLine{15       std::cout << r << std::endl;}
\DoxyCodeLine{16 }
\DoxyCodeLine{17       }
\DoxyCodeLine{18       \textcolor{keywordflow}{if} (r != 0) \{}
\DoxyCodeLine{19           sqlite3\_int64 lastRowId = sqlite3\_last\_insert\_rowid(\_db);}
\DoxyCodeLine{20 }
\DoxyCodeLine{21           \textcolor{comment}{// Você pode agora buscar o tweet recém-\/criado usando o ID obtido}}
\DoxyCodeLine{22           \mbox{\hyperlink{classmodel_1_1Comment}{model::Comment}} newComment = \mbox{\hyperlink{classrepo_1_1CommentRepo_a667ad27ff5728c17ea723902c6b7a498}{searchCommentById}}(\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(lastRowId));}
\DoxyCodeLine{23 }
\DoxyCodeLine{24           \textcolor{comment}{// Retornando o tweet recém-\/criado}}
\DoxyCodeLine{25           \textcolor{keywordflow}{return} newComment;}
\DoxyCodeLine{26       \}}
\DoxyCodeLine{27 }
\DoxyCodeLine{28       \textcolor{keywordflow}{throw} \textcolor{stringliteral}{"Comment não foi adicionado ao banco de dados"};}
\DoxyCodeLine{29   \}}

\end{DoxyCode}
\mbox{\Hypertarget{classrepo_1_1CommentRepo_ac5b3bcd0b53dd1679718e2b20cdeef82}\label{classrepo_1_1CommentRepo_ac5b3bcd0b53dd1679718e2b20cdeef82}} 
\index{repo::CommentRepo@{repo::CommentRepo}!getCommentsByTweetId@{getCommentsByTweetId}}
\index{getCommentsByTweetId@{getCommentsByTweetId}!repo::CommentRepo@{repo::CommentRepo}}
\doxysubsubsection{\texorpdfstring{getCommentsByTweetId()}{getCommentsByTweetId()}}
{\footnotesize\ttfamily std\+::vector$<$ \mbox{\hyperlink{classmodel_1_1Comment}{model\+::\+Comment}} $>$ repo\+::\+Comment\+Repo\+::get\+Comments\+By\+Tweet\+Id (\begin{DoxyParamCaption}\item[{int}]{tweet\+Id }\end{DoxyParamCaption})}



Pega todos os tweets do banco de dados. 


\begin{DoxyParams}{Parameters}
{\em tweet\+Id} & ~\newline
 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Retorna uma lista de todos os tweets do banco de dados 
\end{DoxyReturn}


Definition at line 31 of file commentreppo.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{31                                                                        \{}
\DoxyCodeLine{32     std::vector<model::Comment> commentVec;}
\DoxyCodeLine{33     std::string sql;}
\DoxyCodeLine{34     sql += \textcolor{stringliteral}{"SELECT * FROM comment WHERE tweet\_id = "} + std::to\_string(tweetId) + \textcolor{stringliteral}{";"};}
\DoxyCodeLine{35     std::vector<std::map<std::string, std::string>> result = \mbox{\hyperlink{classrepo_1_1AbstractRepo_a33d5c20bf8231b998a22cce01e5923ed}{executeSelect}}(\_db, sql);}
\DoxyCodeLine{36     \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} commentData : result) \{}
\DoxyCodeLine{37         \mbox{\hyperlink{classmodel_1_1Comment}{model::Comment}} c(stoi(commentData[\textcolor{stringliteral}{"id"}]), stoi(commentData[\textcolor{stringliteral}{"author\_id"}]), }
\DoxyCodeLine{38           stoi(commentData[\textcolor{stringliteral}{"tweet\_id"}]), commentData[\textcolor{stringliteral}{"description"}]);}
\DoxyCodeLine{39         commentVec.push\_back(c);}
\DoxyCodeLine{40     \}}
\DoxyCodeLine{41 }
\DoxyCodeLine{42     \textcolor{keywordflow}{return} commentVec;}
\DoxyCodeLine{43   \}}

\end{DoxyCode}
\mbox{\Hypertarget{classrepo_1_1CommentRepo_a667ad27ff5728c17ea723902c6b7a498}\label{classrepo_1_1CommentRepo_a667ad27ff5728c17ea723902c6b7a498}} 
\index{repo::CommentRepo@{repo::CommentRepo}!searchCommentById@{searchCommentById}}
\index{searchCommentById@{searchCommentById}!repo::CommentRepo@{repo::CommentRepo}}
\doxysubsubsection{\texorpdfstring{searchCommentById()}{searchCommentById()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classmodel_1_1Comment}{model\+::\+Comment}} repo\+::\+Comment\+Repo\+::search\+Comment\+By\+Id (\begin{DoxyParamCaption}\item[{int}]{id }\end{DoxyParamCaption})}



Busca tweets que foram enviados por um usuario com esse username. 


\begin{DoxyParams}{Parameters}
{\em id} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Retorna uma lista de tweets que contenham o author como esse username 
\end{DoxyReturn}


Definition at line 45 of file commentreppo.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{45                                                     \{}
\DoxyCodeLine{46     std::string sql;}
\DoxyCodeLine{47     sql += \textcolor{stringliteral}{"SELECT * FROM comment WHERE id = "} + std::to\_string(\textcolor{keywordtype}{id}) + \textcolor{stringliteral}{";"};}
\DoxyCodeLine{48     std::vector<std::map<std::string, std::string>> result = \mbox{\hyperlink{classrepo_1_1AbstractRepo_a33d5c20bf8231b998a22cce01e5923ed}{executeSelect}}(\_db, sql);}
\DoxyCodeLine{49 }
\DoxyCodeLine{50     \mbox{\hyperlink{classmodel_1_1Comment}{model::Comment}} c(stoi(result[0][\textcolor{stringliteral}{"id"}]), stoi(result[0][\textcolor{stringliteral}{"author\_id"}]), }
\DoxyCodeLine{51       stoi(result[0][\textcolor{stringliteral}{"tweet\_id"}]), result[0][\textcolor{stringliteral}{"description"}]);}
\DoxyCodeLine{52 }
\DoxyCodeLine{53     \textcolor{keywordflow}{return} c;}
\DoxyCodeLine{54   \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
commentrepo.\+hpp\item 
commentreppo.\+cpp\end{DoxyCompactItemize}
